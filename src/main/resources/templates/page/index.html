<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>olap web</title>

    <script src="/jquery-3.6.3.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/workbench.css">
    <style type="text/css">
        #endpoint::-webkit-input-placeholder {
            color: #989898;
        }
    </style>
</head>
<body style="text-align: center;">
    <div style="height: 15%;"></div>
    <div style="height: 30%;">
        <h1 style="font-size: 96px; color: #2c4a8d;">EuclidOLAP Web</h1>
    </div>
    <div>
        <form action="/page/workbench" method="post">
            <input id="endpoint" type="text" placeholder="server-host:port" style="font-size: 32px;">
            <button type="button" style="padding: 5px 30px; font-size: 24px;">Connect</button>
        </form>
    </div>
</body>

<script type="text/javascript">
    $(function() {

        $.ajax({
            url: "/api/wasConnectorExisted",
            success: function(result) {
                if (result == "YES")
                    $("form").submit();
            }
        });

        $("button").click(function(event) {
            $.ajax({
                type: 'POST',
                contentType: "application/json; charset=UTF-8",
                url: "/api/connect",
                data: JSON.stringify({
                    svrHostPort: $("input").val()
                }),
                success: function(response) {
                    console.log(">>>" + response + "<<<");
                    if ("successful" == response)
                        $("form").submit();
                    else
                        alert("can't connect to " + $("input").val());
                },
                error: function(err) {
                    console.error(err);
                    alert(err);
                }
            });
        });

    });
</script>

</html>